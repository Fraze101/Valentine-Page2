<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Will You Be My Valentine? ğŸ’˜</title>
  <style>
    :root {
      --pink-1: #ffd6e7;
      --pink-2: #ffc2db;
      --pink-3: #ff8fb1;
      --pink-4: #ff5f8f;
      --rose: #ff4d7a;
      --text: #6b2240;
      --card: rgba(255, 255, 255, 0.9);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      min-height: 100vh;
      font-family: "Poppins", "Segoe UI", sans-serif;
      display: grid;
      place-items: center;
      overflow: hidden;
      background: radial-gradient(circle at 20% 20%, #ffe7f1 0%, var(--pink-1) 30%, var(--pink-2) 65%, #ffb3cf 100%);
      position: relative;
    }

    /* floating icon layer */
    .bg-icons {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .icon {
      position: absolute;
      bottom: -10vh;
      opacity: 0.2;
      animation: floatUp linear infinite;
      user-select: none;
      filter: drop-shadow(0 2px 4px rgba(255, 77, 122, 0.2));
    }

    @keyframes floatUp {
      0% { transform: translateY(0) translateX(0) rotate(0deg) scale(0.9); opacity: 0; }
      10% { opacity: 0.18; }
      70% { opacity: 0.25; }
      100% { transform: translateY(-120vh) translateX(20px) rotate(360deg) scale(1.15); opacity: 0; }
    }

    /* sparkle particles canvas */
    #particles {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }

    .card {
      position: relative;
      z-index: 3;
      width: min(92vw, 560px);
      background: var(--card);
      border: 1px solid rgba(255, 255, 255, 0.8);
      border-radius: 28px;
      padding: 28px 24px 22px;
      text-align: center;
      box-shadow:
        0 15px 35px rgba(146, 24, 69, 0.18),
        inset 0 1px 0 rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(7px);
      animation: popIn .45s ease;
    }

    @keyframes popIn {
      from { transform: scale(.94) translateY(12px); opacity: 0; }
      to { transform: scale(1) translateY(0); opacity: 1; }
    }

    .emoji {
      font-size: 2.2rem;
      margin-bottom: 6px;
      animation: bob 2s ease-in-out infinite;
    }

    @keyframes bob {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }

    h1 {
      color: var(--text);
      font-size: clamp(1.4rem, 4vw, 2rem);
      line-height: 1.3;
      margin-bottom: 8px;
    }

    .sub {
      color: #934162;
      font-size: 0.95rem;
      margin-bottom: 18px;
      opacity: 0.95;
      white-space: pre-line; /* <-- Added so \n breaks line */
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }

    .music-btn {
      background: #fff;
      color: #8c2f55;
      border: 1px solid #ffd4e5;
      border-radius: 999px;
      padding: 8px 14px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: .2s ease;
      box-shadow: 0 4px 10px rgba(255, 107, 156, .15);
    }

    .music-btn:hover { transform: translateY(-1px); }

    .btn-wrap {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      min-height: 60px;
    }

    button.answer {
      border: none;
      border-radius: 14px;
      padding: 12px 24px;
      font-size: 1.05rem;
      font-weight: 700;
      cursor: pointer;
      transition: transform .18s ease, box-shadow .2s ease, opacity .2s ease;
    }

    #yesBtn {
      color: white;
      background: linear-gradient(135deg, var(--pink-4), var(--rose));
      box-shadow: 0 8px 18px rgba(255, 77, 122, .35);
    }

    #yesBtn:hover { transform: translateY(-2px) scale(1.03); }

    #noBtn {
      color: #5c5c5c;
      background: #f2f2f2;
      box-shadow: 0 6px 12px rgba(0,0,0,.08);
      position: relative;
    }

    .footer {
      margin-top: 14px;
      font-size: .85rem;
      color: #ab4c71;
    }

    .success {
      margin-top: 14px;
      font-size: 1.06rem;
      color: #a40f4b;
      font-weight: 700;
      min-height: 1.4em;
    }
  </style>
</head>
<body>

  <div class="bg-icons" id="bgIcons"></div>
  <canvas id="particles"></canvas>

  <div class="card">
    <div class="emoji">ğŸ’Œ</div>
    <h1 id="question">Will you be my Valentine? ğŸ’˜</h1>
    <p class="sub" id="subtext">I made this page just for you âœ¨</p>

    <div class="controls">
      <button class="music-btn" id="musicToggle">â–¶ï¸ Play Music</button>
      <button class="music-btn" id="musicMute">ğŸ”‡ Mute</button>
    </div>

    <div class="btn-wrap" id="btnWrap">
      <button id="yesBtn" class="answer">Yes ğŸ’–</button>
      <button id="noBtn" class="answer">No ğŸ™ˆ</button>
    </div>

    <p class="success" id="successMsg"></p>
    <p class="footer">Made with extra love & pink pixels ğŸŒ¸</p>
  </div>

  <!-- Replace src with your file -->
  <audio id="bgm" loop preload="auto">
    <source src="your-song.mp3" type="audio/mpeg" />
  </audio>

  <script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const question = document.getElementById("question");
    const subtext = document.getElementById("subtext");
    const successMsg = document.getElementById("successMsg");
    const bgIcons = document.getElementById("bgIcons");

    const musicToggle = document.getElementById("musicToggle");
    const musicMute = document.getElementById("musicMute");
    const bgm = document.getElementById("bgm");

    // ===== Music controls =====
    let started = false;
    musicToggle.addEventListener("click", async () => {
      try {
        if (!started) {
          bgm.volume = 0.45;
          await bgm.play();
          started = true;
          musicToggle.textContent = "â¸ï¸ Pause Music";
        } else if (bgm.paused) {
          await bgm.play();
          musicToggle.textContent = "â¸ï¸ Pause Music";
        } else {
          bgm.pause();
          musicToggle.textContent = "â–¶ï¸ Play Music";
        }
      } catch (e) {
        alert("Couldnâ€™t play audio. Check file path: your-song.mp3");
      }
    });

    musicMute.addEventListener("click", () => {
      bgm.muted = !bgm.muted;
      musicMute.textContent = bgm.muted ? "ğŸ”Š Unmute" : "ğŸ”‡ Mute";
    });

    // ===== Floating icons =====
    const icons = ["ğŸ’–","ğŸ’˜","ğŸ’•","ğŸ’","ğŸ’","ğŸŒ¸","âœ¨","ğŸ©·"];
    for (let i = 0; i < 30; i++) {
      const span = document.createElement("span");
      span.className = "icon";
      span.textContent = icons[Math.floor(Math.random() * icons.length)];
      span.style.left = Math.random() * 100 + "vw";
      span.style.fontSize = (16 + Math.random() * 24) + "px";
      span.style.animationDuration = (8 + Math.random() * 12) + "s";
      span.style.animationDelay = (Math.random() * 8) + "s";
      bgIcons.appendChild(span);
    }

    // ===== Buttons behavior =====
    const noMessages = [
      "Are you sure? ğŸ¥º",
      "Really sure?? ğŸ˜­",
      "Think again please ğŸ’”",
      "Iâ€™ll buy you snacks ğŸ«",
      "Last chance ğŸ˜³",
      "Okay okay... maybe click YES? ğŸ’"
    ];
    let noCount = 0;

    noBtn.addEventListener("click", () => {
      noCount++;
      question.textContent = noMessages[Math.min(noCount - 1, noMessages.length - 1)];

      // yes button grows
      const current = parseFloat(getComputedStyle(yesBtn).fontSize);
      yesBtn.style.fontSize = (current + 5) + "px";
      yesBtn.style.padding = (12 + noCount * 3) + "px " + (24 + noCount * 8) + "px";

      // no button runs away a bit on later clicks
      if (noCount >= 2) {
        const wrap = document.getElementById("btnWrap");
        const wrapRect = wrap.getBoundingClientRect();
        const x = Math.random() * (wrapRect.width * 0.6) - (wrapRect.width * 0.3);
        const y = Math.random() * 20 - 10;
        noBtn.style.transform = `translate(${x}px, ${y}px) scale(${Math.max(0.72, 1 - noCount * 0.05)})`;
      }

      noBtn.style.opacity = String(Math.max(0.2, 1 - noCount * 0.12));
    });

    yesBtn.addEventListener("click", async () => {
      question.textContent = "YAYYY!! ğŸ’˜ You made my day!";
      subtext.textContent = "Officially the cutest Valentine ever ğŸŒ¹\n(P.S. Marry me Natsuki chan |Ï‰â€¢à¹‘`))";
      successMsg.textContent = "Happy Valentineâ€™s Day, my Natsuki Chan ğŸ’";
      yesBtn.style.display = "none";
      noBtn.style.display = "none";
      burstHearts();

      // gentle auto-play attempt if not started yet
      if (!started) {
        try {
          bgm.volume = 0.45;
          await bgm.play();
          started = true;
          musicToggle.textContent = "â¸ï¸ Pause Music";
        } catch {}
      }
    });

    // ===== Canvas heart/sparkle particles =====
    const canvas = document.getElementById("particles");
    const ctx = canvas.getContext("2d");
    let w, h, particles = [];

    function resize() {
      w = canvas.width = innerWidth;
      h = canvas.height = innerHeight;
    }
    addEventListener("resize", resize);
    resize();

    function makeParticle(extra = false) {
      return {
        x: extra ? w * 0.5 + (Math.random() * 180 - 90) : Math.random() * w,
        y: extra ? h * 0.5 + (Math.random() * 80 - 40) : h + Math.random() * h * 0.2,
        vy: extra ? (1.6 + Math.random() * 2.5) : (0.6 + Math.random() * 1.4),
        sway: (Math.random() - 0.5) * (extra ? 2 : 1.2),
        size: extra ? (16 + Math.random() * 10) : (10 + Math.random() * 10),
        alpha: extra ? (0.7 + Math.random() * 0.3) : (0.25 + Math.random() * 0.4),
        char: Math.random() > 0.25 ? "â¤" : "âœ¦"
      };
    }

    for (let i = 0; i < 55; i++) particles.push(makeParticle());

    function draw() {
      ctx.clearRect(0, 0, w, h);

      for (const p of particles) {
        p.y -= p.vy;
        p.x += Math.sin(p.y * 0.01) * p.sway;

        if (p.y < -30) {
          Object.assign(p, makeParticle());
          p.y = h + 20;
        }

        ctx.globalAlpha = p.alpha;
        ctx.font = `${p.size}px serif`;
        ctx.fillText(p.char, p.x, p.y);
      }
      ctx.globalAlpha = 1;
      requestAnimationFrame(draw);
    }
    draw();

    function burstHearts() {
      for (let i = 0; i < 28; i++) particles.push(makeParticle(true));
      if (particles.length > 130) particles = particles.slice(particles.length - 130);
    }
  </script>
</body>
</html>

